# 作者：walls1717
# 需要配置geoip：https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
# 2023-04-18 16:44
# ================
[General]
bypass-system = true
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com
# 此配置可以去除手机VPN标志。如不需要，可以删除配置末尾[0.0.0.0/31, ::ffff:0.0.0.0/31]
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32, 0.0.0.0/31, ::ffff:0.0.0.0/31
dns-server = 119.29.29.29, 2402:4e00::
ipv6 = true
prefer-ipv6 = false
dns-fallback-system = false
dns-direct-system = false
icmp-auto-reply = true
always-reject-url-rewrite = false
private-ip-answer = true
# direct domain fail to resolve use proxy rule
dns-direct-fallback-proxy = true
# update-url = https://raw.githubusercontent.com/walls1717/qsc/master/ShadowRocket.conf

[Proxy Group]
SG Fallback=fallback, interval=3600, tolerance=50, timeout=3, select=0, url=http://www.msftconnecttest.com/connecttest.txt, policy-regex-filter=(?=.*(新加坡|狮城|SG|(?i)Singapore))^((?!(韓國)).)*$
HK Fallback=fallback, interval=3600, tolerance=50, timeout=3, select=0, url=http://www.msftconnecttest.com/connecttest.txt, policy-regex-filter=(?=.*(港|HK|(?i)Hong))^((?!(獅城)).)*$
US Fallback=fallback, interval=3600, tolerance=50, timeout=3, select=0, url=http://www.msftconnecttest.com/connecttest.txt, policy-regex-filter=(?=.*(美国|美國|US|洛杉矶|西雅图|(?i)States|American))^((?!(獅城)).)*$

SG Delay=url-test, interval=3600, tolerance=50, timeout=3, select=0, url=http://www.msftconnecttest.com/connecttest.txt, policy-regex-filter=(?=.*(新加坡|狮城|SG|(?i)Singapore))^((?!(韓國)).)*$
HK Delay=url-test, interval=3600, tolerance=50, timeout=3, select=0, url=http://www.msftconnecttest.com/connecttest.txt, policy-regex-filter=(?=.*(港|HK|(?i)Hong))^((?!(獅城)).)*$
US Delay=url-test, interval=3600, tolerance=50, timeout=3, select=0, url=http://www.msftconnecttest.com/connecttest.txt, policy-regex-filter=(?=.*(美国|美國|US|洛杉矶|西雅图|(?i)States|American))^((?!(獅城)).)*$

SG=select, SG Delay, SG Fallback, select=0, url=http://www.msftconnecttest.com/connecttest.txt, policy-regex-filter=(?=.*(新加坡|狮城|SG|(?i)Singapore))^((?!(韓國)).)*$
HK=select, HK Delay, HK Fallback, select=0, url=http://www.msftconnecttest.com/connecttest.txt, policy-regex-filter=(?=.*(港|HK|(?i)Hong))^((?!(獅城)).)*$
US=select, US Delay, US Fallback, select=0, url=http://www.msftconnecttest.com/connecttest.txt, policy-regex-filter=(?=.*(美国|美國|US|洛杉矶|西雅图|(?i)States|American))^((?!(獅城)).)*$

[Rule]
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list, DIRECT
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list, DIRECT
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list, REJECT
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list, REJECT
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/TikTok.list, US
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list, HK
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTubeMusic.list, HK
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Spotify.list, HK
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Apple.list, DIRECT
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Microsoft.list, US
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyLite.list, SG
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list, DIRECT
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list, DIRECT
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIp.list, DIRECT
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIpV6.list, DIRECT
GEOIP, CN, DIRECT, no-resolve
FINAL, SG

[URL Rewrite]

[Script]

[MITM]