# Author：Jeong Geol
# Github：http://github.com/cnowse
# Date：2023-12-13
# Description：Domestic requests use GEOIP, foreign requests use final.
# GEOIP: IPV4 https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb; IPV4+IPV6 https://gitlab.com/Masaiki/GeoIP2-CN/-/raw/release/Country.mmdb
[General]
ipv6 = false
sni-sniffing = true
disable-stun = true
disable-udp-ports = 443
dns-server = 223.5.5.5, 223.6.6.6
doh3-server = h3://223.5.5.5/dns-query, h3://223.6.6.6/dns-query
test-timeout = 2
interface-mode = auto
disconnect-on-policy-change = true
switch-node-after-failure-times = 3
geoip-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
proxy-test-url = http://www.msftconnecttest.com/connecttest.txt
resource-parser = https://gitlab.com/lodepuly/vpn_tool/-/raw/main/Resource/Script/Sub-Store/sub-store-parser_for_loon.js
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com, e.crashlynatics.com
bypass-tun = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 239.255.255.250/32, 255.255.255.255/32
allow-wifi-access = false
wifi-access-http-port = 7222
wifi-access-socks5-port = 7221

[Proxy]

[Remote Proxy]

[Remote Filter]
ALL Regex = NameRegex, FilterKey = "^(?:(?!Traffic|Expire|套餐|到期|有效|剩余|版本|已用|过期|失联|测试|官方|网址|备用|群|TEST|.com|机场|刷新|每月|更新|返利|网址|感谢).)*$"
SG Regex = NameRegex, FilterKey = "^(?=.*(🇸🇬|新加坡|狮城|SG|SGP|Singapore))(?!.*(🇺🇸|Exp|0.1|0.2)).*$"
HK Regex = NameRegex, FilterKey = "^(?=.*(🇭🇰|香港|HK|HKG|Hong Kong|HongKong))(?!.*(🇹🇼|Exp|0.1|0.2)).*$"
US Regex = NameRegex, FilterKey = "^(?=.*(🇺🇸|美国|\bUS|USA|UnitedStates|United States))(?!.*(Exp|京美|0.1|0.2)).*$"

[Proxy Group]

SG = select, SG Delay, SG Regex, img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
HK = select, HK Delay, HK Regex, img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
US = select, US Regex, img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png

ALL Proxy = select, ALL Regex, img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Proxy.png
SG Delay = url-test, SG Regex, url = http://www.msftconnecttest.com/connecttest.txt, interval = 3600, tolerance = 100, img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
HK Delay = url-test, HK Regex, url = http://www.msftconnecttest.com/connecttest.txt, interval = 3600, tolerance = 100, img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png

[Rule]
FINAL, SG

[Remote Rule]
https://adrules.top/adrules.list, policy = REJECT, tag = AdRules, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Apple/Apple_Resolve.list, tag = Apple_Resolve, policy = DIRECT, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Apple/Apple_Domain.list, tag = Apple_Domain, policy = DIRECT, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/YouTube/YouTube_Resolve.list, tag = YouTube, policy = HK, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/YouTubeMusic/YouTubeMusic.list, tag = YouTubeMusic, policy = HK, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Spotify/Spotify_Resolve.list, tag = Spotify, policy = HK, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/TikTok/TikTok.list, tag = TikTok, policy = US, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/OpenAI/OpenAI.list, tag = OpenAI, policy = US, enabled = true
https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Rule/RULE_REGION, tag = CN, policy = DIRECT, enabled = true

[Host]

[Rewrite]

[Script]

[Plugin]

[Mitm]
hostname = 
ca-p12 = 
ca-passphrase = 
skip-server-cert-verify = true