# Author：Jeong Geol
# Github：http://github.com/cnowse
# Date：2023-12-13
# Description：Domestic requests use GEOIP, foreign requests use final.
# GEOIP: https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
# 兼容性增强[关] 网络活动[开] 排除路由[开] 分流匹配优化[关] DNS劫持[关] 始终开启[开] MPM[关] HTTP代理服务器|SOCKS5代理服务器[关]
[general]
network_check_url = http://www.apple.com/library/test/success.html
server_check_url = http://www.apple.com/library/test/success.html
server_check_timeout = 2000
geo_location_checker = http://ip-api.com/json, https://raw.githubusercontent.com/cnowse/qsc/master/qx/script/IPInfo.js
resource_parser_url = https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
dns_exclusion_list = *.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn, *.cmbchina.com, *.weixin.qq.com, *.weixin.qq.com.cn, *.douyinvod.com
dns_reject_domain_behavior = nxdomain
excluded_routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 239.255.255.250/32, 255.255.255.255/32
udp_drop_list = 443

[dns]
no-ipv6
no-system
prefer-doh3
server = 223.5.5.5
server = 223.6.6.6
doh-server = https://223.5.5.5/dns-query, https://223.6.6.6/dns-query

[policy]
static = SG, 🇸🇬 「Delay」SG, resource-tag-regex = .*, server-tag-regex = (?=.*(?i)(🇸🇬|Singapore|SG|SGP|新加坡))^(?!.*(Game|0.1)), img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
static = HK, 🇭🇰 「Delay」HK, resource-tag-regex = .*, server-tag-regex = (?=.*(?i)(🇭🇰|Hong Kong|HongKong|HK|HKG|香港))^(?!.*(Game|0.1)), img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
static = US, resource-tag-regex = .*, server-tag-regex = (?=.*(?i)(🇺🇸|UnitedStates|United States|\bUS|USA|美国))^(?!.*(Game|0.1)), img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png
static = IPMask, direct, proxy, img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Back.png
url-latency-benchmark = 🇸🇬 「Delay」SG, resource-tag-regex = .*, check-interval = 3600, tolerance = 100, alive-checking = true, server-tag-regex = (?=.*(?i)(🇸🇬|Singapore|SG|SGP|新加坡))^(?!.*(Game|0.1|5x)), img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
url-latency-benchmark = 🇭🇰 「Delay」HK, resource-tag-regex = .*, check-interval = 3600, tolerance = 100, alive-checking = true, server-tag-regex = (?=.*(?i)(🇭🇰|Hong Kong|HongKong|HK|HKG|香港))^(?!.*(Game|0.1)), img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png

[server_remote]


[filter_remote]
https://raw.githubusercontent.com/fmz200/wool_scripts/main/QuantumultX/filter/fenliuxiuzheng.list, tag = Direct, force-policy = direct, update-interval = -1, opt-parser = false, enabled = true
https://raw.githubusercontent.com/cnowse/qsc/master/qx/filter/Apple.snippet, tag = Apple, force-policy = direct, update-interval = -1, opt-parser = false, enabled = true
https://gitlab.com/lodepuly/anti-ad/-/raw/master/anti-ad-quanx.txt, tag = AntiAD, force-policy = reject, update-interval = -1, opt-parser = false, enabled = true
https://raw.githubusercontent.com/cnowse/qsc/master/qx/filter/IPMask.snippet, tag = IPMask, force-policy = IPMask, update-interval = -1, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/OpenAI/OpenAI.list, tag = OpenAI, force-policy = US, update-interval = -1, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/TikTok/TikTok.list, tag = TikTok, force-policy = SG, update-interval = -1, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Spotify/Spotify.list, tag = Spotify, force-policy = HK, update-interval = -1, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/YouTube/YouTube.list, tag = YouTube, force-policy = HK, update-interval = -1, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/YouTubeMusic/YouTubeMusic.list, tag=YouTubeMusic, force-policy=HK, update-interval=-1, opt-parser=false, enabled=true
FILTER_LAN, ta = LAN, force-policy = direct, enabled = true
FILTER_REGION, tag = CN, force-policy = direct, enabled = true

[rewrite_remote]

[server_local]

[filter_local]
final, SG

[rewrite_local]